
import facereco
from flask import Flask, jsonify
from flask import request
app = Flask(__name__)
@app.route('/')
def hello_world():
    return 'Hello, World!'

@app.route('/recognize', methods=['POST'])
def recognizeFaces():
    if request.method == 'POST':
        try:
            data = request.json
            allimages = list()
            for base64image in data:
                res = facereco.readFacesFromImg(base64image)
                allimages.append(res)
            return jsonify(allimages)
        except Exception as e:
            print(e)
            return "Please Provide a Valid Data - a request should POST a application/json body. the JSON body is list that containg JPG base64 encoded images - example: [\"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\"]"
if __name__ == '__main__':
   app.run()